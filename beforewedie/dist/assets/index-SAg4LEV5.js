import{j as e,d as O,r as i,A as l,a as r,L as G}from"./index-dZ8zWVJ6.js";import{C as M}from"./Card-vq2MXBD4.js";import{I as d}from"./Icon-ncuALZp0.js";import{G as _,T as j}from"./GlobalFilter-n0VQ_kVG.js";import{r as o}from"./index-TvUL_Ca8.js";import"./useSkin-c0YZ5c1E.js";import"./iconify--ynwmrU7.js";import"./cleave-phone.us-r_KQ9Y_9.js";const z=({title:a})=>e.jsx("div",{className:"flex justify-between flex-wrap items-center mb-6",children:e.jsx("h4",{className:"font-medium lg:text-2xl text-xl capitalize text-slate-900 inline-block ltr:pr-4 rtl:pl-4",children:a})}),B=[{Header:"#",accessor:"rowIndex"},{Header:"FIRST NAME",accessor:"firstname"},{Header:"LAST NAME",accessor:"lastname"},{Header:"EMAIL",accessor:"email"},{Header:"PHONE",accessor:"phone"},{Header:"ACTION",accessor:"actions"}],U=({Current_user:a})=>{const u=O(),b=new URLSearchParams(u.search).get("userid"),[N,g]=i.useState([]),[f,v]=i.useState(!0),[h,y]=i.useState(!1);i.useEffect(()=>{T()},[h]);const T=async()=>{try{const t=await r.get(`${l}/trip/gettrip?userid=${b}`);if(t.status===200){const s=t.data.token.map((H,F)=>({...H,rowIndex:F+1}));g(s)}}catch(t){console.error("Error fetching Admin data:",t)}finally{v(!1)}},w=async t=>{try{await r.delete(`${l}/trip/deletetrip?tripid=${t}`),await r.delete(`${l}/transport/deletealltransport?tripid=${t}`),await r.delete(`${l}/pitstop/deleteallpitstop?tripid=${t}`),await r.delete(`${l}/cotraveller/deletealltraveller?tripid=${t}`),await r.delete(`${l}/tripalert/deleteallalert?tripid=${t}`),y(!h)}catch(s){console.error("Error deleting :",s)}},k=o.useTable({columns:B,data:N,initialState:{pageIndex:0,pageSize:5}},o.useGlobalFilter,o.useSortBy,o.usePagination),{getTableProps:J,getTableBodyProps:K,headerGroups:Q,footerGroups:V,page:P,nextPage:$,previousPage:E,canNextPage:n,canPreviousPage:c,pageOptions:m,state:I,gotoPage:x,pageCount:A,setPageSize:C,setGlobalFilter:S,prepareRow:R}=k,{globalFilter:D,pageIndex:p,pageSize:L}=I;return f?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:flex justify-between items-center mb-6",children:[e.jsxs("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("select",{className:"form-control py-2 w-max",value:L,onChange:t=>C(Number(t.target.value)),children:[5,10,15].map(t=>e.jsxs("option",{value:t,children:["Show ",t]},t))}),e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",e.jsxs("span",{children:[p+1," of ",m.length]})]})]}),e.jsx("div",{children:e.jsx(_,{filter:D,setFilter:S})})]}),e.jsxs("table",{className:"min-w-full divide-y divide-slate-100 table-fixed dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-200 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:" table-th ",children:"#"}),e.jsx("th",{className:" table-th ",children:"NAME"}),e.jsx("th",{className:" table-th ",children:"TRIP ID"}),e.jsx("th",{className:" table-th ",children:"TRIP NAME"}),e.jsx("th",{className:" table-th ",children:"START DATE"}),e.jsx("th",{className:" table-th ",children:"END DATE"}),e.jsx("th",{className:" table-th ",children:"START POINT"}),e.jsx("th",{className:" table-th ",children:"END POINT"}),e.jsx("th",{className:" table-th ",children:"ACTION"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",children:P.map(t=>(R(t),i.createElement("tr",{...t.getRowProps(),key:t.original.tripid},e.jsx("td",{className:"table-td",children:t.original.rowIndex}),e.jsx("td",{className:"table-td",children:t.original.fname}),e.jsx("td",{className:"table-td",children:t.original.tripid}),e.jsx("td",{className:"table-td",children:t.original.tripname}),e.jsx("td",{className:"table-td",children:t.original.start_date}),e.jsx("td",{className:"table-td",children:t.original.end_date}),e.jsx("td",{className:"table-td",children:t.original.start_point}),e.jsx("td",{className:"table-td",children:t.original.end_point}),e.jsx("td",{className:"table-td",children:e.jsxs("div",{className:"d-flex justify-around rtl-space-x-reverse",children:[e.jsx(j,{content:"view",placement:"top",arrow:!0,animation:"shift-away",children:e.jsx(G,{to:`/tripdetails?tripid=${t.original.tripid}`,className:"action-btn",children:e.jsx(d,{icon:"heroicons:eye"})})}),a==="superadmin"&&e.jsx(j,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:e.jsx("button",{className:"action-btn",type:"button",onClick:()=>w(t.original.tripid),children:e.jsx(d,{icon:"heroicons:trash"})})})]})}))))})]}),e.jsxs("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[e.jsx("div",{className:" flex items-center space-x-3 rtl:space-x-reverse"}),e.jsxs("ul",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{className:` ${c?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>x(0),disabled:!c,children:e.jsx(d,{icon:"heroicons:chevron-double-left-solid"})})}),e.jsx("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{className:` ${c?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>E(),disabled:!c,children:"Prev"})}),m.map((t,s)=>e.jsx("li",{children:e.jsx("button",{href:"#","aria-current":"page",className:`${s===p?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "} text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>x(s),children:t+1})},s)),e.jsx("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{className:` ${n?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>$(),disabled:!n,children:"Next"})}),e.jsx("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{onClick:()=>x(A-1),disabled:!n,className:` ${n?"":"opacity-50 cursor-not-allowed"}`,children:e.jsx(d,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})},W=({Current_user:a})=>e.jsx("div",{children:e.jsx(U,{Current_user:a})}),re=({Current_user:a})=>e.jsxs("div",{children:[e.jsx(z,{title:"Trip"}),e.jsx("div",{className:"lg:col-span-12 col-span-12",children:e.jsx(M,{children:e.jsx(W,{Current_user:a})})})]});export{re as default};
