import{j as e,r as l,A as x,a as p,L as b}from"./index-dZ8zWVJ6.js";import{C as F}from"./Card-vq2MXBD4.js";import{I as r}from"./Icon-ncuALZp0.js";import{G,T as m}from"./GlobalFilter-n0VQ_kVG.js";import{r as c}from"./index-TvUL_Ca8.js";import"./useSkin-c0YZ5c1E.js";import"./iconify--ynwmrU7.js";import"./cleave-phone.us-r_KQ9Y_9.js";const O=({title:t})=>e.jsx("div",{className:"flex justify-between flex-wrap items-center mb-6",children:e.jsx("h4",{className:"font-medium lg:text-2xl text-xl capitalize text-slate-900 inline-block ltr:pr-4 rtl:pl-4",children:t})}),M=[{Header:"#",accessor:"rowIndex"},{Header:"FIRST NAME",accessor:"firstname"},{Header:"LAST NAME",accessor:"lastname"},{Header:"EMAIL",accessor:"email"},{Header:"PHONE",accessor:"phone"},{Header:"ACTION",accessor:"actions"}],B=({Current_user:t})=>{const[g,N]=l.useState([]),[f,o]=l.useState(!0),[h,v]=l.useState(!1);l.useEffect(()=>{y()},[h]);const y=async()=>{try{const s=await p.get(`${x}/user/getuser`);if(s.status===200){const L=s.data.token.map((R,U)=>({...R,rowIndex:U+1}));N(L)}o(!1)}catch(s){console.error("Error fetching Admin data:",s),o(!1)}finally{o(!1)}},k=async s=>{try{const a=await p.delete(`${x}/user/delete?userid=${s}`);v(!h)}catch(a){console.error("Error deleting :",a)}},w=c.useTable({columns:M,data:g,initialState:{pageIndex:0,pageSize:5}},c.useGlobalFilter,c.useSortBy,c.usePagination),{getTableProps:V,getTableBodyProps:W,headerGroups:q,footerGroups:J,page:E,nextPage:P,previousPage:I,canNextPage:i,canPreviousPage:n,pageOptions:u,state:C,gotoPage:d,pageCount:T,setPageSize:$,setGlobalFilter:A,prepareRow:S}=w,{globalFilter:H,pageIndex:j,pageSize:D}=C;return f?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:flex justify-between items-center mb-6",children:[e.jsxs("div",{className:" flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("select",{className:"form-control py-2 w-max",value:D,onChange:s=>$(Number(s.target.value)),children:[5,10,15].map(s=>e.jsxs("option",{value:s,children:["Show ",s]},s))}),e.jsxs("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Page"," ",e.jsxs("span",{children:[j+1," of ",u.length]})]})]}),e.jsx("div",{children:e.jsx(G,{filter:H,setFilter:A})})]}),e.jsxs("table",{className:"min-w-full divide-y divide-slate-100 table-fixed dark:divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-200 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:" table-th ",children:"#"}),e.jsx("th",{className:" table-th ",children:"USER ID"}),e.jsx("th",{className:" table-th ",children:"NAME"}),e.jsx("th",{className:" table-th ",children:"DOB"}),e.jsx("th",{className:" table-th ",children:"GENDER"}),e.jsx("th",{className:" table-th ",children:"EMAIL"}),e.jsx("th",{className:" table-th ",children:"PHONE"}),e.jsx("th",{className:" table-th ",children:"ACTION"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-slate-100 dark:bg-slate-800 dark:divide-slate-700",children:E.map(s=>(S(s),l.createElement("tr",{...s.getRowProps(),key:s.original.userid},e.jsx("td",{className:"table-td",children:s.original.rowIndex}),e.jsx("td",{className:"table-td",children:s.original.userid}),e.jsxs("td",{className:"table-td flex items-center space-x-3",children:[e.jsx("img",{src:`${x}/${s.original.userimage}`,alt:"User",className:"rounded-full h-10 w-10 object-cover"}),e.jsx("span",{children:s.original.fname})]}),e.jsx("td",{className:"table-td",children:s.original.dob}),e.jsx("td",{className:"table-td",children:s.original.gender}),e.jsx("td",{className:"table-td",children:s.original.email}),e.jsx("td",{className:"table-td",children:s.original.phone}),e.jsx("td",{className:"table-td",children:e.jsxs("div",{className:"d-flex justify-around rtl-space-x-reverse",children:[e.jsx(m,{content:"View User",placement:"top",arrow:!0,animation:"shift-away",children:e.jsx(b,{to:`/userprofile?userid=${s.original.userid}`,className:"action-btn",children:e.jsx(r,{icon:"heroicons:user"})})}),e.jsx(m,{content:"View Trip",placement:"top",arrow:!0,animation:"shift-away",children:e.jsx(b,{to:`/trip?userid=${s.original.userid}`,className:"action-btn",children:e.jsx(r,{icon:"heroicons:eye"})})}),t==="superadmin"&&e.jsx(m,{content:"Delete",placement:"top",arrow:!0,animation:"shift-away",theme:"danger",children:e.jsx("button",{className:"action-btn",type:"button",onClick:()=>k(s.original.userid),children:e.jsx(r,{icon:"heroicons:trash"})})})]})}))))})]}),e.jsxs("div",{className:"md:flex md:space-y-0 space-y-5 justify-between mt-6 items-center",children:[e.jsx("div",{className:" flex items-center space-x-3 rtl:space-x-reverse"}),e.jsxs("ul",{className:"flex items-center space-x-3 rtl:space-x-reverse",children:[e.jsx("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{className:` ${n?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>d(0),disabled:!n,children:e.jsx(r,{icon:"heroicons:chevron-double-left-solid"})})}),e.jsx("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{className:` ${n?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>I(),disabled:!n,children:"Prev"})}),u.map((s,a)=>e.jsx("li",{children:e.jsx("button",{href:"#","aria-current":"page",className:`${a===j?"bg-slate-900 dark:bg-slate-600  dark:text-slate-200 text-white font-medium ":"bg-slate-100 dark:bg-slate-700 dark:text-slate-400 text-slate-900  font-normal  "} text-sm rounded leading-[16px] flex h-6 w-6 items-center justify-center transition-all duration-150`,onClick:()=>d(a),children:s+1})},a)),e.jsx("li",{className:"text-sm leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{className:` ${i?"":"opacity-50 cursor-not-allowed"}`,onClick:()=>P(),disabled:!i,children:"Next"})}),e.jsx("li",{className:"text-xl leading-4 text-slate-900 dark:text-white rtl:rotate-180",children:e.jsx("button",{onClick:()=>d(T-1),disabled:!i,className:` ${i?"":"opacity-50 cursor-not-allowed"}`,children:e.jsx(r,{icon:"heroicons:chevron-double-right-solid"})})})]})]})]})},z=({Current_user:t})=>e.jsx("div",{children:e.jsx(B,{Current_user:t})}),te=({Current_user:t})=>e.jsxs("div",{children:[e.jsx(O,{title:"Travellers"}),e.jsx("div",{className:"lg:col-span-12 col-span-12",children:e.jsx(F,{children:e.jsx(z,{Current_user:t})})})]});export{te as default};
